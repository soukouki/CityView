# 座標についてのメモ

このシステムでは以下の3つの座標系を使用している。混同に注意すること。

1. ゲームタイル座標系
  - ひし形のタイルを詰めた座標系
  - (0,0)がマップの上端、(MAP_X-1, 0)が右端、(0, MAP_Y-1)が左端、(MAP_X-1, MAP_Y-1)が下端
  - 負数、マップサイズ以上の値を取ることはない
    - 撮影時の座標設定で弾かれてしまう

2. スクショ座標系
  - ゲームの画面をベースにした座標系
  - (0,0)が、ゲームタイル座標系の(0,0)を撮影した画像の左上隅、(IMAGE_WIDTH-1, 0)が右上隅、(0, IMAGE_HEIGHT-1)が左下隅、(IMAGE_WIDTH-1, IMAGE_HEIGHT-1)が右下隅
  - Xは負数を取る。Yは負数を取らない

3. 地図タイル座標系
  - 地図タイルを詰めた座標系
  - ズームレベルを持ち、(Z, X, Y)の3つの値で表される
  - Z=0のとき、(0, 0, 0)がマップ全体を表す1枚のタイル
  - Z=1のとき、(1, 0, 0)がマップの左上4分の1を表すタイル、(1, 1, 0)が右上4分の1、(1, 0, 1)が左下4分の1、(1, 1, 1)が右下4分の1
  - Zが1増えるごとに、XとYの値は2倍の範囲を取り、各タイルが表す面積は1/4になる
  - Zが最大値のとき、地図タイルの1pxがスクショの1pxに対応する
  - 原点とサイズはすべてのスクショが収まり、さらに少し左右下に余裕を持たせた位置に設定されている
